<!-- Displays all posts that have not yet been published.
Allows the author to publish, edit, or delete each draft. -->

{% extends 'blog/base.html' %}

{% block content %}
{% for post in posts %}
<a href="{% url 'post_detail' pk=post.pk %}" style="text-decoration:none;color:inherit;">
    <div class="post post-detail-flex">
        <!-- POST CONTENT: title and text preview -->
        <div class="post-content">
            <h2>{{ post.title }}</h2>
            <div>{{ post.text|striptags|truncatechars:500|safe }}</div>
        </div>
        <!-- ACTION BUTTONS: publish, edit, delete -->
        <div class="actions-row" style="margin-top: 50px;">
            <form method="post" action="{% url 'post_publish' pk=post.pk %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-secondary" title="Publish">
                    {% include './icons/file-earmark-plus.svg' %}
                    Publish
                </button>
            </form>
            <!-- EDIT DRAFT -->
            <a class="btn btn-secondary" href="{% url 'post_edit' pk=post.pk %}" title="Edit">
                {% include './icons/pencil-fill.svg' %}
            </a>
            <!-- DELETE DRAFT -->
            <form method="post" action="{% url 'post_remove' pk=post.pk %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-secondary" title="Delete">
                    {% include './icons/trash-fill.svg' %}
                </button>
            </form>
        </div>
    </div>
</a>
{% endfor %}
{% endblock %}
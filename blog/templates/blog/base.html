<!-------------------------------------------
    BASE TEMPLATE FOR DJANGO
-------------------------------------------
    Global HTML structure
        Global CSS and font imports (Bootstrap, Google Fonts, blog.css)
        Shared header with navigation links (Login, Logout, New Post, Drafts)
        Main content block for page-specific templates
-------------------------------------------
-->

{% load static %}
<!DOCTYPE html>
<html>

<head>
    <!-- ===== GLOBAL STYLES & HEAD ASSETS ===== -->
    <title>Django Girls blog</title>
    <link rel="icon" type="image/png" href="{% static 'blog/img/logo.png' %}">

    <!-- Bootstrap 5 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
        <!-- Google Font (Lobster) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext">
    
    <!-- Local CSS files -->
    <link rel="stylesheet" href="{% static 'css/blog.css' %}">
    <link rel="stylesheet" href="{% static 'css/comments_section.css' %}">
</head>

<body>
    <!-- Global style: prevent horizontal scrollbars -->
    <style>
        body {
            overflow-x: hidden;
        }
    </style>

    <!-- ===== SITE HEADER / NAVIGATION BAR ===== -->

    {% with url_name=request.resolver_match.url_name %}
    {% if url_name != 'login' and url_name != 'password_reset' and url_name != 'password_reset_done' and url_name != 'password_reset_confirm' and url_name != 'password_reset_complete' and url_name != 'password_change' and url_name != 'password_change_done' %}
    <div class="header-actions">
        <!-- Blog title (hidden on login and password pages) -->
        <h1><a href="/">Django Girls Blog</a></h1>
        <div class="header-right">
            {% if user.is_authenticated %}
                <div class="header-new">
                    {% if url_name != 'post_list' %}
                    <a href="{% url 'post_new' %}" class="header-btn">New Post</a>
                    {% endif %}
                </div>
                <div class="header-draft">
                    <a href="{% url 'post_draft_list' %}" class="header-btn">Drafts</a>
                </div>
                <div class="header-logout">
                    <form method="post" action="{% url 'logout' %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="header-btn">Log out</button>
                    </form>
                </div>
            {% else %}
                <div class="header-login">
                    <a href="{% url 'login' %}" class="header-btn">Login</a>
                </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    {% endwith %}

    <!-- ===== MAIN CONTENT AREA ===== -->
     
    <!-- Every child template defines its own content inside the block below -->
    <main class="content container">
        <div class="row">
            <div class="col">
                {% block content %}
                {% endblock %}
            </div>
        </div>
    </main>
</body>

</html>